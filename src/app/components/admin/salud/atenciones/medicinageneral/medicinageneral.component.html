<ngx-spinner bdColor="rgba(0, 0, 0, 0.65)" size="medium" color="#fff" type="ball-clip-rotate"></ngx-spinner>
<div class="animated fadeIn">
<h2 class="text-uppercase text-center">Atención del paciente
    <small class="d-block text-muted">Formulario de atención del paciente.</small>
</h2>
<hr>

<app-perfil-salud [id]="id" [tipoBusqueda]="profile_by" ></app-perfil-salud>

<div class="card mb-4">
        <div class="card-body">
                <form #atencionForm="ngForm" (ngSubmit)="AtencionPaciente(atencionForm)" novalidate  >


    <fieldset>
        <legend>Episodio asistencial</legend>

        <div class="alert alert-danger alert" *ngIf="error.length > 0">
            <label><b>Corrige los errores:</b></label>
            <ul>
                <div *ngFor="let error of error">
                    <li *ngIf="error.errores.length>0">
                        <p>{{error.errores[0].ErrorMessage}}</p>
                    </li>
                </div>
            </ul>
        </div>
       
            
    
        <div class="card border-info  mb-3">
            <div class="card-body">
                <div class="form-row mb-3"> 

                        <div class="col-12 col-md-12">
                                <label for="tipos_pacientes"><span class="asterisk">*</span>Tipo de paciente</label>
                                <select class="form-control" [ngClass]="{'is-invalid': ((atencionForm.submitted || tipos_pacientes.touched) && tipos_pacientes.errors?.required) }" [(ngModel)]="formulario.tipo_paciente" id="tipos_pacientes" name="tipos_pacientes" required #tipos_pacientes="ngModel">
                                      <option value="null" selected disabled>Seleccione un tipo de paciente</option>
                                      <option *ngFor="let tipoPaciente of tiposPacientes" value="{{tipoPaciente.id}}">{{tipoPaciente.nombre}}</option>
                                    </select>
                        </div>

                    </div>
                    
                    
                    <div class="form-row">
                        <div class="col-12 ">
                                <div id="motivo_consulta" class="form-group">
                                        <label for="motivo_consulta"><span class="asterisk">*</span>Motivo de consulta</label>
                                        <textarea class="form-control " [ngClass]="{'is-invalid ': motivo_consulta.errors?.required && (atencionForm.submitted || motivo_consulta.touched) }" type="text" placeholder="Ingrese el Motivo de la consulta. Máx 1000 caracteres" name="motivo_consulta"
                                        id="motivo_consulta" [(ngModel)]="formulario.motivo_consulta" required #motivo_consulta="ngModel" rows=6 maxlength="1000"> </textarea>
                                        <div class="invalid-feedback">Ingrese el motivo de la consulta. </div>
                                </div>
                                <div id="enfermedad_actual" class="form-group">
                                        <label for="enfermedad_actual"><span class="asterisk">*</span>Enfermedad actual </label>
                                        <textarea class="form-control " [ngClass]="{'is-invalid ': enfermedad_actual.errors?.required && (atencionForm.submitted || enfermedad_actual.touched) }" type="text" placeholder="Ingrese la enfermdad actual. Máx 1000 caracteres" name="enfermedad_actual"
                                        id="enfermedad_actual" [(ngModel)]="formulario.enfermedad_actual" required #enfermedad_actual="ngModel" rows=6 maxlength="1000"> </textarea>
                                        <div class="invalid-feedback">Ingrese la enfermedad actual. </div>
                                </div>
                        </div>
                    
                </div>
        </div>
        </div>

        <div class="card border-info mb-3">
                
                <div class="card-body">
                    
                   <div class="card-header text-center text-white bg-info mb-3"><strong>ANTECEDENTES</strong></div>
                   
                   
                    <div class="form-row" *ngFor="let antecedente of antecedentes; let i = index;">
                            <div class="col-md-4 col-lg-3 col-xl-2" > 
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" [(checklist)]="formulario.antecedentes" 
                                        [checklistValue]="antecedente" 
                                        [id]="antecedente.nombre"  
                                        #antecedent>
                                        <label class="form-check-label" [for]="antecedente.nombre">
                                                {{antecedente.nombre}}
                                        </label>
                                    </div>                            
                            </div> 
                            <div class="col-md-8 col-lg-9 col-xl-10">
                                    <div class="form-group">
                                        <input type="text" name="text_{{i}}" id="text_{{i}}" class="form-control form-control-sm"  [(ngModel)]="antecedente.observacion" 
                                            #text_i="ngModel"  maxlength="150" />
                                    </div>
                            </div> 
                                                                        
                    </div>
                  
                    <div  *ngIf="atencion.sexo == false">
                        <div class="card-header text-center text-white bg-info mb-3"><strong>GINECO - OBSTÉTRICOS</strong></div>
                        
                        <div class="form-row"  >
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Menarquia"><span *ngIf="requiredGineco()" class="asterisk">*</span>Menarquía (Años) </label>
                                            <input type="number" 
                                            name="Menarquia" 
                                            id="Menarquia"
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Menarquia.touched) && (Menarquia.errors?.required) )}"                                              
                                            class="form-control form-control-sm"  
                                            [(ngModel)]="formulario.examen_gineco.menarquia"  [required]="requiredGineco()"
                                            #Menarquia="ngModel"  maxlength="50" min="0" />
                                            
                                        </div>
                                </div>
    
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Sexarquia"><span *ngIf="requiredGineco()" class="asterisk">*</span>Sexarquía (Años)</label>                                                
                                                 <input type="number" 
                                                 name="Sexarquia" 
                                                 id="Sexarquia" 
                                                 class="form-control form-control-sm" 
                                                 [ngClass]="{'is-invalid': ((atencionForm.submitted || Sexarquia.touched) && (Sexarquia.errors?.required) )}" 
                                                 [(ngModel)]="formulario.examen_gineco.sexarquia"  [required]="requiredGineco()"
                                                 #Sexarquia="ngModel"  maxlength="50" min="0" />
                                        </div>
                                </div>
    
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="FUM"><span *ngIf="requiredGineco()" class="asterisk">*</span>FUM</label>
                                            <p-calendar showButtonBar="true" dateFormat="dd/mm/yy" [(ngModel)]="formulario.examen_gineco.fum"  #FUM="ngModel" [readonlyInput]="true"  name="Sexarquia" [defaultDate]="dateNow" styleClass="d-block"
                                                inputId="Sexarquia" inputStyleClass="form-control form-control-sm" [locale]="es">
                                            </p-calendar>
                                            <div class="text-danger" *ngIf="((atencionForm.submitted || FUM.touched) && requiredGineco())" ><small>Complete esta opción.</small>  </div>
                                        </div>
                                </div>
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Ciclos"><span *ngIf="requiredGineco()" class="asterisk">*</span>Ciclos</label>
                                            <input type="text" name="Ciclos" id="Ciclos" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Ciclos.touched) && (Ciclos.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.ciclos"  [required]="requiredGineco()"

                                                #Ciclos="ngModel" maxlength="150" />
                                        </div>
                                </div>
                        </div>
                        <div class="form-row" >
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Gravidez"><span *ngIf="requiredGineco()" class="asterisk">*</span>Gravidez</label>
                                            <input type="number" name="Gravidez" id="Gravidez" class="form-control form-control-sm"  
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Gravidez.touched) && (Gravidez.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.gravidez"  [required]="requiredGineco()"
                                                #Gravidez="ngModel" min="0" />
                                        </div>
                                </div>
    
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Abortos"><span *ngIf="requiredGineco()" class="asterisk">*</span>Abortos </label>
                                            <input type="number" name="Abortos" id="Abortos" class="form-control form-control-sm"  
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Abortos.touched) && (Abortos.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.abortos" [required]="requiredGineco()"
                                                #Abortos="ngModel"  min="0" />
                                        </div>
                                </div>
    
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Partos"><span *ngIf="requiredGineco()" class="asterisk">*</span>Partos</label>
                                            <input type="number" name="Partos" id="Partos" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Partos.touched) && (Partos.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.partos"  [required]="requiredGineco()"
                                                #Partos="ngModel"  min="0" />
                                        </div>
                                </div>
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Vaginales"><span *ngIf="requiredGineco()" class="asterisk">*</span>Vaginales</label>
                                            <input type="number" name="Vaginales" id="Vaginales" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Vaginales.touched) && (Vaginales.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.vaginales" [required]="requiredGineco()"
                                                #Vaginales="ngModel"  min="0" />
                                        </div>
                                </div>
                        </div>
                        <div class="form-row" >
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Cesareas"><span *ngIf="requiredGineco()" class="asterisk">*</span>Cesáreas</label>
                                            <input type="number" name="Cesareas" id="Cesareas" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Cesareas.touched) && (Cesareas.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.cesareas" [required]="requiredGineco()"
                                                #Cesareas="ngModel"  min="0" />
                                        </div>
                                </div>
    
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="Ectopicos"><span *ngIf="requiredGineco()" class="asterisk">*</span>Ectópico</label>
                                            <input type="number" name="Ectopicos" id="Ectopicos" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || Ectopicos.touched) && (Ectopicos.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.ectopicos" [required]="requiredGineco()"
                                                #Ectopicos="ngModel"  min="0" />
                                        </div>
                                </div>
    
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="gemelar"><span *ngIf="requiredGineco()" class="asterisk">*</span>Gemelar</label>
                                            <input type="number" name="gemelar" id="gemelar" class="form-control form-control-sm"  
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || gemelar.touched) && (gemelar.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.gemelar" [required]="requiredGineco()"
                                                #gemelar="ngModel"  min="0" />
                                        </div>
                                </div>
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="muertos"><span *ngIf="requiredGineco()" class="asterisk">*</span>Muertos</label>
                                            <input type="number" name="muertos" id="muertos" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || muertos.touched) && (muertos.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.muertos" [required]="requiredGineco()"
                                                #muertos="ngModel"  min="0" />
                                        </div>
                                </div>
                        </div>
                        <div class="form-row" >
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="vivos"><span *ngIf="requiredGineco()" class="asterisk">*</span>Vivos</label>
                                            <input type="number" name="vivos" id="vivos" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || vivos.touched) && (vivos.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.vivos" [required]="requiredGineco()"
                                                #vivos="ngModel"  min="0" />
                                        </div>
                                </div>
    
                                <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="viven"><span *ngIf="requiredGineco()" class="asterisk">*</span>Viven</label>
                                            <input type="number" name="viven" id="viven" class="form-control form-control-sm" 
                                            [ngClass]="{'is-invalid': ((atencionForm.submitted || viven.touched) && (viven.errors?.required) )}" 
                                            [(ngModel)]="formulario.examen_gineco.viven" [required]="requiredGineco()"
                                                #viven="ngModel"  min="0" />
                                        </div>
                                </div>
                        </div>
                        <div class="form-row">
                            <!-- [ngClass]="{'is-invalid': ((atencionForm.submitted || observacion_gineco.touched) && observacion_gineco.errors?.required) }" -->
                            <!-- [required]="requiredGineco()" -->
                                <div class="col-12 ">
                                        <div id="observacion_g" class="form-group">
                                            <label for="observacion_gineco">Observaciones Gineco-Obstétricos: </label>
                                            <textarea class="form-control"   type="text" placeholder="Ingrese la observación. Máx 1000 caracteres" name="observacion_gineco"
                                            maxlength="1000" id="observacion_gineco" [(ngModel)]="formulario.observacion_gineco"  #observacion_gineco="ngModel" rows=6  > </textarea>
                                            <div class="invalid-feedback">Ingrese la observación. </div>
                                        </div>
                                   </div>
                        </div>
                    </div>

                  
                    <div class="card-header text-center text-white bg-info mb-3"><strong>EXAMEN FÍSICO</strong></div>
                    
                    <div class="form-row" >
                            <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="ta"><span class="asterisk">*</span>TA</label>
                                        <input type="number" name="ta" id="ta" class="form-control form-control-sm"  required  [(ngModel)]="formulario.ta" [ngClass]="{'is-invalid': ((atencionForm.submitted || ta.touched) && ta.errors?.required) }" 
                                            #ta="ngModel"  maxlength="50" min="0"/>
                                    </div>
                            </div>

                            <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="temperatura"><span class="asterisk">*</span>Temperatura (°C)</label>
                                        <input type="number" name="temperatura" id="temperatura" class="form-control form-control-sm" [ngClass]="{'is-invalid': ((atencionForm.submitted || temperatura.touched) && temperatura.errors?.required) }" 
                                        [(ngModel)]="formulario.temperatura" required
                                            #temperatura="ngModel"  maxlength="50" min="0" />
                                    </div>
                            </div>

                            <div class="col-md-1">
                                    <div class="form-group">
                                        <label for="fr"><span class="asterisk">*</span>FR</label>
                                        <input type="number" name="fr" id="fr" class="form-control form-control-sm" required
                                        [(ngModel)]="formulario.fr" [ngClass]="{'is-invalid': ((atencionForm.submitted || fr.touched) && fr.errors?.required) }" 
                                            #fr="ngModel"  maxlength="50" min="0"/>
                                    </div>
                            </div>
                            <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="glasgow"> Glasgow </label>
                                        <input type="text" name="glasgow" id="glasgow" class="form-control form-control-sm" 
                                        [(ngModel)]="formulario.glasgow" 
                                            #glasgow="ngModel"  maxlength="50" />
                                    </div>
                            </div>
                            <div class="col-md-1">
                                    <div class="form-group">
                                        <label for="fc"><span class="asterisk">*</span>FC</label>
                                        <input type="number" name="fc" id="fc" class="form-control form-control-sm" required
                                        [(ngModel)]="formulario.fc"  [ngClass]="{'is-invalid': ((atencionForm.submitted || fc.touched) && fc.errors?.required) }" 
                                            #fc="ngModel"  maxlength="50" min="0"/>
                                    </div>
                            </div>
                            <div class="col-md-2">
                                    <div class="form-group">
                                        <label for="peso"><span class="asterisk">*</span>Peso (Kg)</label>
                                        <input type="number" name="peso" id="peso" class="form-control form-control-sm" required
                                        [(ngModel)]="formulario.peso" [ngClass]="{'is-invalid': ((atencionForm.submitted || peso.touched) && peso.errors?.required) }" 
                                            #peso="ngModel"  maxlength="50" min="0" />
                                    </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label for="talla"><span class="asterisk">*</span>Talla (cm)</label>
                                    <input type="number" name="talla" id="talla" class="form-control form-control-sm" required
                                    [(ngModel)]="formulario.talla" [ngClass]="{'is-invalid': ((atencionForm.submitted || talla.touched) && talla.errors?.required) }" 
                                        #talla="ngModel"  maxlength="50" min="0"/>
                                </div>
                            </div>
                    </div>
                    <div class="form-row">
                         
                        <div class="col-md-3" *ngFor="let item of examen_Fisico; let i = index; ">
                                <div class="form-group">
                                        <label for="tex{{item.id}}"><span class="asterisk">*</span><strong>{{item.nombre}}</strong> </label>
                                        <br>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="tex{{item.id}}" id="tex{{item.id}}" [value]="true" [(ngModel)]="item.estado"  #tex="ngModel" required>
                                            <label class="form-check-label" for="tex{{item.id}}">Normal</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="tex{{item.id}}" id="tex{{item.id}}_i" [value]="false" [(ngModel)]="item.estado"  #tex="ngModel" required>
                                            <label class="form-check-label" for="tex{{item.id}}_i">Anormal</label>
                                        </div>
                                        <div class="text-danger" *ngIf="((atencionForm.submitted || tex.touched) && tex.errors?.required)" ><small>Complete esta opción.</small> 
                                        </div>
                                        
                                </div>                                
                        </div>     
                    </div>
                   
                    <div class="form-row">
                            <div class="col-12 ">
                                    <div id="observacion_fisico" class="form-group">
                                        <label for="observacion_fisico" >Observaciones examen físico </label>
                                        <textarea class="form-control "  type="text" placeholder="Ingrese la observación. Máx 1000 caracteres" name="observacion_fisico"
                                         id="observacion_fisico" [(ngModel)]="formulario.observacion_fisico"  #observacion_fisico="ngModel" rows=6 maxlength="1000"> </textarea>
                                        <div class="invalid-feedback">Ingrese la observación. </div>
                                    </div>
                               </div>
                    </div> 
                </div>
        </div>

        
        <div class="card border-info  mb-3" >
                
                <div class="card-body">
                        <div class="card-header text-uppercase text-center text-white bg-info mb-3"><strong>Impresión diagnóstica</strong></div>
                        
                        <div class="form-row">
                                <div class="col-12 ">
                                        <div id="impresion_diagnostica" class="form-group">
                                            <label for="impresion_diagnostica"><span class="asterisk">*</span>Impresión diagnóstica </label>
                                            <textarea class="form-control " [ngClass]="{'is-invalid ': impresion_diagnostica.errors?.required && (atencionForm.submitted || impresion_diagnostica.touched) }" type="text" placeholder="Ingrese la enfermdad actual. Máx 1000 caracteres" name="impresion_diagnostica"
                                            id="impresion_diagnostica" [(ngModel)]="formulario.impresion_diagnostica" required #impresion_diagnostica="ngModel" rows=6 maxlength="1000"> </textarea>
                                            <div class="invalid-feedback">Ingrese la impresión diagnóstica. </div>
                                        </div>
                                   </div>
                        </div>
                </div>
        </div>

        <div class="card border-info  mb-3" >
                
                <div class="card-body">
                        <div class="card-header text-uppercase text-center text-white bg-info mb-3"><strong> cie 10</strong></div>
                        
                        <div class="form-row mb-2">
                                
                                <div class="col-11 ">
                                        <ng-select [items]="cie_10" inputStyleClass="form-control form-control-sm"  id="cie10" bindLabel="nombre"  placeholder="Seleccione cie 10" name="cie10" #cie10 ="ngModel"
                                        [(ngModel)]="cieValue">
                                        <ng-template ng-option-tmp let-item="item" let-search="searchTerm">
                                                <div><span [ngOptionHighlight]="search"> {{item.codigo}} - {{item.nombre}}</span></div>
                                        </ng-template>
                                        <ng-template ng-notfound-tmp let-searchTerm="searchTerm">
                                            <div class="ng-option disabled">
                                                No hay resultados
                                            </div>
                                        </ng-template>
                                    </ng-select>
                                </div>
                                <div class="col-1">
                                  <button class="btn btn-success " (click)="ingresarCodigos(cieValue); cieValue= null" type="button">añadir</button>                      
                                </div>
                        </div>
                         
                                <table class="table table-light" *ngIf="aux_cie10.length > 0">
                                        <thead>
                                                <tr>
                                                        <th scope="col">Código </th>
                                                        <th scope="col" class="text-center">Nombre</th>
                                                        <th scope="col" class="text-center" style="width: 100px;">Acciones</th>
                                                </tr>
                                        </thead>
                                        <tbody>
                                                <tr *ngFor="let item of aux_cie10; let i ">

                                                        <td>{{item.codigo}}</td>
                                                        <td>{{item.nombre}}</td>
                                                        <td><button class="btn btn-sm btn-outline-dark" (click)="aux_cie10.splice(aux_cie10.indexOf(item),1)" type="button"><span class="fas fa-times"></span></button></td>
                                                </tr>
                                        </tbody>
                                </table>
                         
                       

                </div>
        </div>

        
        <div class="card border-info  mb-3" >
                
                <div class="card-body">
                        <div class="card-header text-uppercase text-center text-white bg-info mb-3"><strong>SOLICITUD DE REPORTE DE PARACLÍNICOS</strong></div>
                     
                        <div class="form-row" >
                              
                                <div class="col-md-12" *ngFor="let item of tipoExamenes; let i = index;">
                                        <div class="form-group">
                                            <label for="exam{{i}}">{{item.nombre}}</label>
                                            <input type="text" name="exam{{i}}" id="exam{{i}}" class="form-control form-control-sm"  [(ngModel)]="item.observacion" 
                                                #exam{{item.id}}="ngModel"  maxlength="150" />
                                        </div>
                                        <div class="form-row" *ngIf="item.id == 2 && item.observacion">
                                                <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="pt"><span class="asterisk">*</span>PT</label>
                                                            <input type="text" name="pt" id="pt" class="form-control form-control-sm"  [(ngModel)]="formulario.pt" 
                                                                #pt="ngModel"  maxlength="150" />
                                                        </div>
                                                </div>
                                                <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="pt"><span class="asterisk">*</span>PTT</label>
                                                            <input type="text" name="ptt" id="ptt" class="form-control form-control-sm"  [(ngModel)]="formulario.ptt" 
                                                                #pt="ngModel"  maxlength="150" />
                                                        </div>
                                                </div>
                                                <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="glicemia"><span class="asterisk">*</span>Glicemia </label>
                                                            <input type="text" name="glicemia" id="glicemia" class="form-control form-control-sm"  [(ngModel)]="formulario.glicemia" 
                                                                #glicemia="ngModel"  maxlength="150" />
                                                        </div>
                                                </div>
                                                <div class="col-md-3">
                                                        <div class="form-group">
                                                            <label for="gravindex"><span class="asterisk">*</span>Gravindex</label>
                                                            <input type="text" name="gravindex" id="gravindex" class="form-control form-control-sm"  [(ngModel)]="formulario.gravindex" 
                                                                #gravindex="ngModel"  maxlength="150" />
                                                        </div>
                                                </div>
                                        </div>
                                        <div class=form-row *ngIf="item.id == 6 && item.observacion">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="amilsa"><span class="asterisk">*</span>Amilsa </label>
                                                    <input type="text" name="amilsa" id="amilsa" class="form-control form-control-sm" [(ngModel)]="formulario.amilsa" 
                                                        #amilsa="ngModel"  maxlength="150" />
                                                </div>
                                            </div>
                                        </div>
                                </div>
                        </div>
             </div>
        </div>

  

        <div class="card border-info  mb-3">
                
                <div class="card-body">
                    <!-- {{medicamento | json}} -->
                        <div class="card-header text-uppercase text-center text-white bg-info mb-3"><strong>Formulario</strong></div>
                        <!-- {{medicamento | json}} -->
                        <div class="form-row"> 
                            <div class="col-6 ">
                                <ng-autocomplete #ngAutoCompleteStatic
                                        [data]="medicamentos"
                                        name="name"
                                        [(ngModel)]="medicamento.nombre_medicamento"
                                        [initialValue]=""
                                        placeHolder="Ingrese el medicamento"
                                        searchKeyword="nombre"
                                        [itemTemplate]="itemTemplateStatic"
                                        >
                                </ng-autocomplete>     
                                <ng-template #itemTemplateStatic let-item>
                                    <a [innerHTML]="item.nombre"></a>
                                </ng-template> 
                            </div>

                           <div class="col-5">                                    
                                <div id="Observacion_medicamento" class="form-group">                                   
                                    <input type="text" name="Observacion_medicamento" id="Observacion_medicamento" class="form-control form-control-sm" 
                                    [(ngModel)]="medicamento.Observacion_medicamento"
                                    #Observacion_medicamento="ngModel"  maxlength="1000" placeholder="Observacion" />
                                    <div class="invalid-feedback">Ingrese la receta. </div>
                                </div>
                            </div> 
                           <div class="col-1">
                                <div id="Observacion_medicamento-boton" class="form-group">                                  
                                        <button class="btn btn-sm btn-success " (click)="ingresarMedicamento(medicamento); "  type="button">añadir</button>                      
                                </div>
                           </div>   
                         </div>  <!-- {{Medicamentos | json}} -->
                        </div>
                     
                        
                            <table class="table table-light" *ngIf="Medicamentos.length > 0">
                                <thead>
                                        <tr>
                                            <th scope="col">Medicamento(s) </th>
                                            <th scope="col" >Observaciones</th>
                                            <th scope="col" class="text-center" style="width: 100px;">Acciones</th>
                                        </tr>
                                </thead>
                                <tbody>
                                        <tr *ngFor="let item of Medicamentos; let i ">
                                            <td>{{item.nombre_medicamento}}</td>
                                            <td>{{item.Observacion_medicamento}}</td>
                                            <td><button class="btn btn-sm btn-outline-dark" (click)="Medicamentos.splice(Medicamentos.indexOf(item),1)" type="button"><span class="fas fa-times"></span></button></td>
                                        </tr>
                                </tbody>
                            </table>

                         
                </div>                
        

        
    </fieldset>
    <hr>
   
    <div class="text-center">
        <button id="volver" type="button" class="btn btn-default mr-md-1 mb-3" [routerLink]="[ '/estudiantes/dashboard' ]">Volver</button>
        <button id="guardar" type="submit" class="btn btn-success mb-3">Guardar</button>
    </div>

</form>
</div>
</div>


</div>

